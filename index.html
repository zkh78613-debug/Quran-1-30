<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Indo-Pak Quran - 100 Verse Tracker</title>
    <style>
        /* This is a high-quality Indo-Pak style font */
        @import url('https://fonts.googleapis.com/css2?family=Amiri+Quran&display=swap');
        
        body { font-family: 'Segoe UI', sans-serif; background: #f4f1ea; margin: 0; padding: 0; direction: rtl; }
        .container { max-width: 1000px; margin: auto; background: white; padding: 40px; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
        
        .header-ui { 
            position: fixed; top: 0; left: 0; width: 100%; background: #2d5a27; 
            color: white; padding: 15px; text-align: center; direction: ltr; z-index: 1000; 
        }

        .quran-text { 
            margin-top: 100px; 
            font-family: 'Amiri Quran', serif; 
            font-size: 38px; 
            line-height: 2.8; 
            text-align: justify;
            color: #1a1a1a;
        }

        .surah-header {
            text-align: center; background: #f8f9fa; border: 2px solid #2d5a27;
            margin: 40px 0; padding: 20px; border-radius: 10px; direction: ltr;
        }

        .verse-box { display: inline; position: relative; padding: 0 5px; }
        
        /* The indicator for the stop point */
        .stop-here { 
            background-color: #ffeb3b; 
            border: 3px solid #fbc02d;
            border-radius: 8px;
            padding: 5px 10px;
        }

        .verse-number {
            font-size: 18px; color: #2d5a27; font-family: sans-serif;
            margin: 0 5px; vertical-align: middle;
        }

        .btn { background: #fff; color: #2d5a27; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-weight: bold; margin: 0 10px; }
    </style>
</head>
<body>

<div class="header-ui">
    <span id="info">Loading Quran...</span>
    <button class="btn" onclick="changeDay(-1)">Previous Day</button>
    <button class="btn" onclick="changeDay(1)">Next Day</button>
</div>

<div class="container">
    <div id="quran-display" class="quran-text"></div>
</div>

<script>
    const surahCounts = [7,286,200,176,120,165,206,75,129,109,123,111,43,52,99,128,111,110,98,135,112,78,118,64,77,227,93,88,69,60,34,30,73,54,45,83,182,88,75,85,54,53,89,59,37,35,38,29,18,45,60,49,62,55,78,96,29,22,24,13,14,11,11,18,12,12,30,52,52,44,28,28,20,56,40,31,50,40,46,42,42,15,25,22,17,19,26,30,20,15,21,11,8,8,11,5,8,8,11,11,8,3,9,5,4,7,3,6,3,5,4,5,6];
    
    let currentDay = localStorage.getItem('quranDay') ? parseInt(localStorage.getItem('quranDay')) : 1;

    function getStopPoint(day) {
        let totalVersesToRead = day * 100;
        let count = 0;
        for (let i = 0; i < surahCounts.length; i++) {
            if (count + surahCounts[i] >= totalVersesToRead) {
                return { s: i + 1, v: totalVersesToRead - count };
            }
            count += surahCounts[i];
        }
        return { s: 114, v: 6 };
    }

    async function loadAllQuran() {
        const display = document.getElementById('quran-display');
        const stopPoint = getStopPoint(currentDay);
        document.getElementById('info').innerText = `Day ${currentDay} Target: Surah ${stopPoint.s}, Verse ${stopPoint.v}`;

        for (let s = 1; s <= 114; s++) {
            const res = await fetch(`https://api.quran.com/api/v4/quran/verses/indopak?chapter_number=${s}`);
            const data = await res.json();
            
            let surahHtml = `<div class="surah-header">Surah ${s}</div>`;
            
            data.verses.forEach((v, index) => {
                let vNum = index + 1;
                let isStop = (s === stopPoint.s && vNum === stopPoint.v);
                let highlightClass = isStop ? 'stop-here' : '';
                
                surahHtml += `<div class="verse-box ${highlightClass}">
                                ${v.text_indopak}
                                <span class="verse-number">(${vNum})</span>
                              </div> `;
            });
            
            display.innerHTML += surahHtml;
            
            // Auto-scroll to the stop point once that Surah is loaded
            if (s === stopPoint.s) {
                setTimeout(() => {
                    document.querySelector('.stop-here')?.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 500);
            }
        }
    }

    function changeDay(val) {
        currentDay += val;
        localStorage.setItem('quranDay', currentDay);
        location.reload(); // Reload to recalculate and scroll
    }

    loadAllQuran();
</script>

</body>
</html>
